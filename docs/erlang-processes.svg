<?xml version="1.0" encoding="UTF-8" standalone="no"?><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" contentScriptType="application/ecmascript" contentStyleType="text/css" height="1306px" preserveAspectRatio="none" style="width:1216px;height:1306px;background:#FFFFFF;" version="1.1" viewBox="0 0 1216 1306" width="1216px" zoomAndPan="magnify"><defs><filter height="300%" id="f1vz61evznzwz6" width="300%" x="-1" y="-1"><feGaussianBlur result="blurOut" stdDeviation="2.0"/><feColorMatrix in="blurOut" result="blurOut2" type="matrix" values="0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 .4 0"/><feOffset dx="4.0" dy="4.0" in="blurOut2" result="blurOut3"/><feBlend in="SourceGraphic" in2="blurOut3" mode="normal"/></filter></defs><g><text fill="#000000" font-family="sans-serif" font-size="18" lengthAdjust="spacing" textLength="379" x="415" y="43.3486">Router Start of Persistent Erlang Processes</text><text fill="#000000" font-family="sans-serif" font-size="18" lengthAdjust="spacing" textLength="294" x="457.5" y="64.3018">(some have remote components)</text><rect fill="#DDDDDD" height="1208.5703" style="stroke:#A80036;stroke-width:1.0;" width="856" x="239" y="76.5469"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="312" x="511" y="88.6138">Exists entirely within router's BEAM image</text><rect fill="#FA8072" filter="url(#f1vz61evznzwz6)" height="116.0977" style="stroke:#B0C4DE;stroke-width:1.0;" width="10" x="17.5" y="726.9609"/><rect fill="#FA8072" filter="url(#f1vz61evznzwz6)" height="987.25" style="stroke:#FA8072;stroke-width:1.0;" width="10" x="440" y="173.5703"/><line style="stroke:#B0C4DE;stroke-width:1.0;" x1="440" x2="440" y1="173.5703" y2="1160.8203"/><line style="stroke:#B0C4DE;stroke-width:1.0;" x1="450" x2="450" y1="173.5703" y2="1160.8203"/><line style="stroke:#B0C4DE;stroke-width:1.0;" x1="440" x2="450" y1="173.5703" y2="173.5703"/><rect fill="#FA8072" filter="url(#f1vz61evznzwz6)" height="1" style="stroke:#FA8072;stroke-width:1.0;" width="10" x="440" y="1188.8203"/><line style="stroke:#B0C4DE;stroke-width:1.0;" x1="440" x2="440" y1="1188.8203" y2="1189.8203"/><line style="stroke:#B0C4DE;stroke-width:1.0;" x1="450" x2="450" y1="1188.8203" y2="1189.8203"/><rect fill="#FA8072" filter="url(#f1vz61evznzwz6)" height="40.1328" style="stroke:#B0C4DE;stroke-width:1.0;" width="10" x="531.5" y="606.5625"/><rect fill="#FA8072" filter="url(#f1vz61evznzwz6)" height="135.5313" style="stroke:#B0C4DE;stroke-width:1.0;" width="10" x="649.5" y="471.0313"/><rect fill="#FA8072" filter="url(#f1vz61evznzwz6)" height="170.2305" style="stroke:#B0C4DE;stroke-width:1.0;" width="10" x="971.5" y="897.3242"/><line style="stroke:#B0C4DE;stroke-width:1.0;" x1="22" x2="22" y1="163.5703" y2="1160.8203"/><line style="stroke:#B0C4DE;stroke-width:1.0;stroke-dasharray:1.0,4.0;" x1="22" x2="22" y1="1160.8203" y2="1188.8203"/><line style="stroke:#B0C4DE;stroke-width:1.0;" x1="22" x2="22" y1="1188.8203" y2="1198.8203"/><line style="stroke:#B0C4DE;stroke-width:1.0;" x1="111" x2="111" y1="163.5703" y2="1160.8203"/><line style="stroke:#B0C4DE;stroke-width:1.0;stroke-dasharray:1.0,4.0;" x1="111" x2="111" y1="1160.8203" y2="1188.8203"/><line style="stroke:#B0C4DE;stroke-width:1.0;" x1="111" x2="111" y1="1188.8203" y2="1198.8203"/><line style="stroke:#B0C4DE;stroke-width:1.0;" x1="201" x2="201" y1="163.5703" y2="1160.8203"/><line style="stroke:#B0C4DE;stroke-width:1.0;stroke-dasharray:1.0,4.0;" x1="201" x2="201" y1="1160.8203" y2="1188.8203"/><line style="stroke:#B0C4DE;stroke-width:1.0;" x1="201" x2="201" y1="1188.8203" y2="1198.8203"/><line style="stroke:#B0C4DE;stroke-width:1.0;" x1="282" x2="282" y1="163.5703" y2="1160.8203"/><line style="stroke:#B0C4DE;stroke-width:1.0;stroke-dasharray:1.0,4.0;" x1="282" x2="282" y1="1160.8203" y2="1188.8203"/><line style="stroke:#B0C4DE;stroke-width:1.0;" x1="282" x2="282" y1="1188.8203" y2="1198.8203"/><line style="stroke:#B0C4DE;stroke-width:1.0;" x1="444.5" x2="444.5" y1="163.5703" y2="1160.8203"/><line style="stroke:#B0C4DE;stroke-width:1.0;stroke-dasharray:1.0,4.0;" x1="444.5" x2="444.5" y1="1160.8203" y2="1188.8203"/><line style="stroke:#B0C4DE;stroke-width:1.0;" x1="444.5" x2="444.5" y1="1188.8203" y2="1198.8203"/><line style="stroke:#B0C4DE;stroke-width:1.0;" x1="536.5" x2="536.5" y1="163.5703" y2="1160.8203"/><line style="stroke:#B0C4DE;stroke-width:1.0;stroke-dasharray:1.0,4.0;" x1="536.5" x2="536.5" y1="1160.8203" y2="1188.8203"/><line style="stroke:#B0C4DE;stroke-width:1.0;" x1="536.5" x2="536.5" y1="1188.8203" y2="1198.8203"/><line style="stroke:#B0C4DE;stroke-width:1.0;" x1="654" x2="654" y1="163.5703" y2="1160.8203"/><line style="stroke:#B0C4DE;stroke-width:1.0;stroke-dasharray:1.0,4.0;" x1="654" x2="654" y1="1160.8203" y2="1188.8203"/><line style="stroke:#B0C4DE;stroke-width:1.0;" x1="654" x2="654" y1="1188.8203" y2="1198.8203"/><line style="stroke:#B0C4DE;stroke-width:1.0;" x1="744.5" x2="744.5" y1="163.5703" y2="1160.8203"/><line style="stroke:#B0C4DE;stroke-width:1.0;stroke-dasharray:1.0,4.0;" x1="744.5" x2="744.5" y1="1160.8203" y2="1188.8203"/><line style="stroke:#B0C4DE;stroke-width:1.0;" x1="744.5" x2="744.5" y1="1188.8203" y2="1198.8203"/><line style="stroke:#B0C4DE;stroke-width:1.0;" x1="806.5" x2="806.5" y1="163.5703" y2="1160.8203"/><line style="stroke:#B0C4DE;stroke-width:1.0;stroke-dasharray:1.0,4.0;" x1="806.5" x2="806.5" y1="1160.8203" y2="1188.8203"/><line style="stroke:#B0C4DE;stroke-width:1.0;" x1="806.5" x2="806.5" y1="1188.8203" y2="1198.8203"/><line style="stroke:#B0C4DE;stroke-width:1.0;" x1="888.5" x2="888.5" y1="163.5703" y2="1160.8203"/><line style="stroke:#B0C4DE;stroke-width:1.0;stroke-dasharray:1.0,4.0;" x1="888.5" x2="888.5" y1="1160.8203" y2="1188.8203"/><line style="stroke:#B0C4DE;stroke-width:1.0;" x1="888.5" x2="888.5" y1="1188.8203" y2="1198.8203"/><line style="stroke:#B0C4DE;stroke-width:1.0;" x1="976.5" x2="976.5" y1="163.5703" y2="1160.8203"/><line style="stroke:#B0C4DE;stroke-width:1.0;stroke-dasharray:1.0,4.0;" x1="976.5" x2="976.5" y1="1160.8203" y2="1188.8203"/><line style="stroke:#B0C4DE;stroke-width:1.0;" x1="976.5" x2="976.5" y1="1188.8203" y2="1198.8203"/><line style="stroke:#B0C4DE;stroke-width:1.0;" x1="1065" x2="1065" y1="163.5703" y2="1160.8203"/><line style="stroke:#B0C4DE;stroke-width:1.0;stroke-dasharray:1.0,4.0;" x1="1065" x2="1065" y1="1160.8203" y2="1188.8203"/><line style="stroke:#B0C4DE;stroke-width:1.0;" x1="1065" x2="1065" y1="1188.8203" y2="1198.8203"/><line style="stroke:#B0C4DE;stroke-width:1.0;" x1="1127" x2="1127" y1="163.5703" y2="1160.8203"/><line style="stroke:#B0C4DE;stroke-width:1.0;stroke-dasharray:1.0,4.0;" x1="1127" x2="1127" y1="1160.8203" y2="1188.8203"/><line style="stroke:#B0C4DE;stroke-width:1.0;" x1="1127" x2="1127" y1="1188.8203" y2="1198.8203"/><line style="stroke:#B0C4DE;stroke-width:1.0;" x1="1184" x2="1184" y1="163.5703" y2="1160.8203"/><line style="stroke:#B0C4DE;stroke-width:1.0;stroke-dasharray:1.0,4.0;" x1="1184" x2="1184" y1="1160.8203" y2="1188.8203"/><line style="stroke:#B0C4DE;stroke-width:1.0;" x1="1184" x2="1184" y1="1188.8203" y2="1198.8203"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="29" x="5" y="160.2686">APIs</text><ellipse cx="22.5" cy="90.2734" fill="#FEFECE" filter="url(#f1vz61evznzwz6)" rx="8" ry="8" style="stroke:#A80036;stroke-width:2.0;"/><path d="M22.5,98.2734 L22.5,125.2734 M9.5,106.2734 L35.5,106.2734 M22.5,125.2734 L9.5,140.2734 M22.5,125.2734 L35.5,140.2734 " fill="none" filter="url(#f1vz61evznzwz6)" style="stroke:#A80036;stroke-width:2.0;"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="29" x="5" y="1210.8154">APIs</text><ellipse cx="22.5" cy="1224.1172" fill="#FEFECE" filter="url(#f1vz61evznzwz6)" rx="8" ry="8" style="stroke:#A80036;stroke-width:2.0;"/><path d="M22.5,1232.1172 L22.5,1259.1172 M9.5,1240.1172 L35.5,1240.1172 M22.5,1259.1172 L9.5,1274.1172 M22.5,1259.1172 L35.5,1274.1172 " fill="none" filter="url(#f1vz61evznzwz6)" style="stroke:#A80036;stroke-width:2.0;"/><rect fill="#FEFECE" filter="url(#f1vz61evznzwz6)" height="46.5938" style="stroke:#A80036;stroke-width:1.5;" width="89" x="67" y="107.9766"/><rect fill="#FEFECE" filter="url(#f1vz61evznzwz6)" height="46.5938" style="stroke:#A80036;stroke-width:1.5;" width="89" x="63" y="111.9766"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="75" x="70" y="131.9717">Blockchain</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="33" x="91" y="148.2686">Core</text><rect fill="#FEFECE" filter="url(#f1vz61evznzwz6)" height="46.5938" style="stroke:#A80036;stroke-width:1.5;" width="89" x="67" y="1197.8203"/><rect fill="#FEFECE" filter="url(#f1vz61evznzwz6)" height="46.5938" style="stroke:#A80036;stroke-width:1.5;" width="89" x="63" y="1201.8203"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="75" x="70" y="1221.8154">Blockchain</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="33" x="91" y="1238.1123">Core</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="36" x="180.5" y="143.9717">State</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="57" x="170" y="160.2686">Channel</text><ellipse cx="201.5" cy="114.9766" fill="#FEFECE" filter="url(#f1vz61evznzwz6)" rx="12" ry="12" style="stroke:#A80036;stroke-width:2.0;"/><line style="stroke:#A80036;stroke-width:2.0;" x1="189.5" x2="213.5" y1="128.9766" y2="128.9766"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="36" x="180.5" y="1210.8154">State</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="57" x="170" y="1227.1123">Channel</text><ellipse cx="201.5" cy="1246.4141" fill="#FEFECE" filter="url(#f1vz61evznzwz6)" rx="12" ry="12" style="stroke:#A80036;stroke-width:2.0;"/><line style="stroke:#A80036;stroke-width:2.0;" x1="189.5" x2="213.5" y1="1260.4141" y2="1260.4141"/><rect fill="#FEFECE" filter="url(#f1vz61evznzwz6)" height="62.8906" style="stroke:#A80036;stroke-width:1.5;" width="74" x="243" y="95.6797"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="55" x="252.5" y="115.6748">Listener</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="60" x="250" y="131.9717">for gRPC</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="49" x="255.5" y="148.2686">(ranch)</text><rect fill="#FEFECE" filter="url(#f1vz61evznzwz6)" height="62.8906" style="stroke:#A80036;stroke-width:1.5;" width="74" x="243" y="1197.8203"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="55" x="252.5" y="1217.8154">Listener</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="60" x="250" y="1234.1123">for gRPC</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="49" x="255.5" y="1250.4092">(ranch)</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="47" x="418.5" y="143.9717">Router</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="34" x="425" y="160.2686">init/1</text><ellipse cx="445" cy="114.9766" fill="#FEFECE" filter="url(#f1vz61evznzwz6)" rx="12" ry="12" style="stroke:#A80036;stroke-width:2.0;"/><polygon fill="#A80036" points="441,102.9766,447,97.9766,445,102.9766,447,107.9766,441,102.9766" style="stroke:#A80036;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="47" x="418.5" y="1210.8154">Router</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="34" x="425" y="1227.1123">init/1</text><ellipse cx="445" cy="1246.4141" fill="#FEFECE" filter="url(#f1vz61evznzwz6)" rx="12" ry="12" style="stroke:#A80036;stroke-width:2.0;"/><polygon fill="#A80036" points="441,1234.4141,447,1229.4141,445,1234.4141,447,1239.4141,441,1234.4141" style="stroke:#A80036;stroke-width:1.0;"/><rect fill="#FEFECE" filter="url(#f1vz61evznzwz6)" height="46.5938" style="stroke:#A80036;stroke-width:1.5;" width="106" x="481.5" y="111.9766"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="65" x="502" y="131.9717">Channels</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="92" x="488.5" y="148.2686">(Integrations)</text><rect fill="#FEFECE" filter="url(#f1vz61evznzwz6)" height="46.5938" style="stroke:#A80036;stroke-width:1.5;" width="106" x="481.5" y="1197.8203"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="65" x="502" y="1217.8154">Channels</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="92" x="488.5" y="1234.1123">(Integrations)</text><rect fill="#FEFECE" filter="url(#f1vz61evznzwz6)" height="30.2969" style="stroke:#A80036;stroke-width:1.5;" width="61" x="622" y="128.2734"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="47" x="629" y="148.2686">Device</text><rect fill="#FEFECE" filter="url(#f1vz61evznzwz6)" height="30.2969" style="stroke:#A80036;stroke-width:1.5;" width="61" x="622" y="1197.8203"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="47" x="629" y="1217.8154">Device</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="27" x="728" y="160.2686">ETS</text><path d="M726.5,111.2734 C726.5,101.2734 744.5,101.2734 744.5,101.2734 C744.5,101.2734 762.5,101.2734 762.5,111.2734 L762.5,137.2734 C762.5,147.2734 744.5,147.2734 744.5,147.2734 C744.5,147.2734 726.5,147.2734 726.5,137.2734 L726.5,111.2734 " fill="#FEFECE" filter="url(#f1vz61evznzwz6)" style="stroke:#000000;stroke-width:1.5;"/><path d="M726.5,111.2734 C726.5,121.2734 744.5,121.2734 744.5,121.2734 C744.5,121.2734 762.5,121.2734 762.5,111.2734 " fill="none" style="stroke:#000000;stroke-width:1.5;"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="27" x="728" y="1210.8154">ETS</text><path d="M726.5,1224.1172 C726.5,1214.1172 744.5,1214.1172 744.5,1214.1172 C744.5,1214.1172 762.5,1214.1172 762.5,1224.1172 L762.5,1250.1172 C762.5,1260.1172 744.5,1260.1172 744.5,1260.1172 C744.5,1260.1172 726.5,1260.1172 726.5,1250.1172 L726.5,1224.1172 " fill="#FEFECE" filter="url(#f1vz61evznzwz6)" style="stroke:#000000;stroke-width:1.5;"/><path d="M726.5,1224.1172 C726.5,1234.1172 744.5,1234.1172 744.5,1234.1172 C744.5,1234.1172 762.5,1234.1172 762.5,1224.1172 " fill="none" style="stroke:#000000;stroke-width:1.5;"/><rect fill="#FEFECE" filter="url(#f1vz61evznzwz6)" height="30.2969" style="stroke:#A80036;stroke-width:1.5;" width="64" x="772.5" y="128.2734"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="50" x="779.5" y="148.2686">Metrics</text><rect fill="#FEFECE" filter="url(#f1vz61evznzwz6)" height="30.2969" style="stroke:#A80036;stroke-width:1.5;" width="64" x="772.5" y="1197.8203"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="50" x="779.5" y="1217.8154">Metrics</text><rect fill="#FEFECE" filter="url(#f1vz61evznzwz6)" height="30.2969" style="stroke:#A80036;stroke-width:1.5;" width="73" x="850.5" y="128.2734"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="59" x="857.5" y="148.2686">DevAddr</text><rect fill="#FEFECE" filter="url(#f1vz61evznzwz6)" height="30.2969" style="stroke:#A80036;stroke-width:1.5;" width="73" x="850.5" y="1197.8203"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="59" x="857.5" y="1217.8154">DevAddr</text><rect fill="#FEFECE" filter="url(#f1vz61evznzwz6)" height="30.2969" style="stroke:#A80036;stroke-width:1.5;" width="74" x="937.5" y="128.2734"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="60" x="944.5" y="148.2686">Decoder</text><rect fill="#FEFECE" filter="url(#f1vz61evznzwz6)" height="30.2969" style="stroke:#A80036;stroke-width:1.5;" width="74" x="937.5" y="1197.8203"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="60" x="944.5" y="1217.8154">Decoder</text><rect fill="#FEFECE" filter="url(#f1vz61evznzwz6)" height="46.5938" style="stroke:#A80036;stroke-width:1.5;" width="47" x="1040" y="111.9766"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="30" x="1048.5" y="131.9717">XOR</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="33" x="1047" y="148.2686">Filter</text><rect fill="#FEFECE" filter="url(#f1vz61evznzwz6)" height="46.5938" style="stroke:#A80036;stroke-width:1.5;" width="47" x="1040" y="1197.8203"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="30" x="1048.5" y="1217.8154">XOR</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="33" x="1047" y="1234.1123">Filter</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="47" x="1101" y="143.9717">Router</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="21" x="1114" y="160.2686">DB</text><path d="M1109.5,94.9766 C1109.5,84.9766 1127.5,84.9766 1127.5,84.9766 C1127.5,84.9766 1145.5,84.9766 1145.5,94.9766 L1145.5,120.9766 C1145.5,130.9766 1127.5,130.9766 1127.5,130.9766 C1127.5,130.9766 1109.5,130.9766 1109.5,120.9766 L1109.5,94.9766 " fill="#FEFECE" filter="url(#f1vz61evznzwz6)" style="stroke:#000000;stroke-width:1.5;"/><path d="M1109.5,94.9766 C1109.5,104.9766 1127.5,104.9766 1127.5,104.9766 C1127.5,104.9766 1145.5,104.9766 1145.5,94.9766 " fill="none" style="stroke:#000000;stroke-width:1.5;"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="47" x="1101" y="1210.8154">Router</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="21" x="1114" y="1227.1123">DB</text><path d="M1109.5,1240.4141 C1109.5,1230.4141 1127.5,1230.4141 1127.5,1230.4141 C1127.5,1230.4141 1145.5,1230.4141 1145.5,1240.4141 L1145.5,1266.4141 C1145.5,1276.4141 1127.5,1276.4141 1127.5,1276.4141 C1127.5,1276.4141 1109.5,1276.4141 1109.5,1266.4141 L1109.5,1240.4141 " fill="#FEFECE" filter="url(#f1vz61evznzwz6)" style="stroke:#000000;stroke-width:1.5;"/><path d="M1109.5,1240.4141 C1109.5,1250.4141 1127.5,1250.4141 1127.5,1250.4141 C1127.5,1250.4141 1145.5,1250.4141 1145.5,1240.4141 " fill="none" style="stroke:#000000;stroke-width:1.5;"/><rect fill="#FEFECE" filter="url(#f1vz61evznzwz6)" height="46.5938" style="stroke:#A80036;stroke-width:1.5;" width="36" x="1164" y="111.9766"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="18" x="1173" y="131.9717">V8</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="22" x="1171" y="148.2686">(JS)</text><rect fill="#FEFECE" filter="url(#f1vz61evznzwz6)" height="46.5938" style="stroke:#A80036;stroke-width:1.5;" width="36" x="1164" y="1197.8203"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="18" x="1173" y="1217.8154">V8</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="22" x="1171" y="1234.1123">(JS)</text><rect fill="#FA8072" filter="url(#f1vz61evznzwz6)" height="116.0977" style="stroke:#B0C4DE;stroke-width:1.0;" width="10" x="17.5" y="726.9609"/><rect fill="#FA8072" filter="url(#f1vz61evznzwz6)" height="987.25" style="stroke:#FA8072;stroke-width:1.0;" width="10" x="440" y="173.5703"/><line style="stroke:#B0C4DE;stroke-width:1.0;" x1="440" x2="440" y1="173.5703" y2="1160.8203"/><line style="stroke:#B0C4DE;stroke-width:1.0;" x1="450" x2="450" y1="173.5703" y2="1160.8203"/><line style="stroke:#B0C4DE;stroke-width:1.0;" x1="440" x2="450" y1="173.5703" y2="173.5703"/><rect fill="#FA8072" filter="url(#f1vz61evznzwz6)" height="1" style="stroke:#FA8072;stroke-width:1.0;" width="10" x="440" y="1188.8203"/><line style="stroke:#B0C4DE;stroke-width:1.0;" x1="440" x2="440" y1="1188.8203" y2="1189.8203"/><line style="stroke:#B0C4DE;stroke-width:1.0;" x1="450" x2="450" y1="1188.8203" y2="1189.8203"/><rect fill="#FA8072" filter="url(#f1vz61evznzwz6)" height="40.1328" style="stroke:#B0C4DE;stroke-width:1.0;" width="10" x="531.5" y="606.5625"/><rect fill="#FA8072" filter="url(#f1vz61evznzwz6)" height="135.5313" style="stroke:#B0C4DE;stroke-width:1.0;" width="10" x="649.5" y="471.0313"/><rect fill="#FA8072" filter="url(#f1vz61evznzwz6)" height="170.2305" style="stroke:#B0C4DE;stroke-width:1.0;" width="10" x="971.5" y="897.3242"/><ellipse cx="744" cy="214.0859" rx="4" ry="4" style="stroke:#A80036;stroke-width:1.5;fill:none;"/><polygon fill="#A80036" points="727,210.8359,737,214.8359,727,218.8359,731,214.8359" style="stroke:#A80036;stroke-width:1.0;"/><line style="stroke:#A80036;stroke-width:1.0;" x1="450" x2="733" y1="214.8359" y2="214.8359"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="58" x="457" y="194.6372">init_ets/0</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="61" x="457" y="209.77">ets:new/2</text><path d="M749,178.5703 L749,218.5703 L982,218.5703 L982,188.5703 L972,178.5703 L749,178.5703 " fill="#FBFB77" filter="url(#f1vz61evznzwz6)" style="stroke:#A80036;stroke-width:1.0;"/><path d="M972,178.5703 L972,188.5703 L982,188.5703 L972,178.5703 " fill="#FBFB77" style="stroke:#A80036;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="172" x="755" y="195.6372">ETS: in-memory data store</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="212" x="755" y="210.77">./src/decoders/router_decoder.erl</text><ellipse cx="281.5" cy="275.918" rx="4" ry="4" style="stroke:#A80036;stroke-width:1.5;fill:none;"/><polygon fill="#A80036" points="298.5,272.668,288.5,276.668,298.5,280.668,294.5,276.668" style="stroke:#A80036;stroke-width:1.0;"/><line style="stroke:#A80036;stroke-width:1.0;" x1="296.5" x2="439" y1="276.668" y2="276.668"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="73" x="360" y="256.4692">application:</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="130" x="303" y="271.6021">ensure_all_started/1</text><path d="M455,232.8359 L455,287.8359 L851,287.8359 L851,242.8359 L841,232.8359 L455,232.8359 " fill="#FBFB77" filter="url(#f1vz61evznzwz6)" style="stroke:#A80036;stroke-width:1.0;"/><path d="M841,232.8359 L841,242.8359 L851,242.8359 L841,232.8359 " fill="#FBFB77" style="stroke:#A80036;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="375" x="461" y="249.9028">RPC using Google ProtoBufs listens via ranch socket server</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="358" x="461" y="265.0356">./src/grpc/helium_router_service.erl, grpc_lib, grpc_client</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="373" x="461" y="280.1685">Template rendered via ./_build/default/lib/grpc_*/erlang.mk</text><ellipse cx="111" cy="337.75" rx="4" ry="4" style="stroke:#A80036;stroke-width:1.5;fill:none;"/><polygon fill="#A80036" points="128,334.5,118,338.5,128,342.5,124,338.5" style="stroke:#A80036;stroke-width:1.0;"/><line style="stroke:#A80036;stroke-width:1.0;" x1="126" x2="439" y1="338.5" y2="338.5"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="89" x="344" y="333.4341">init supervisor</text><path d="M455,302.2344 L455,357.2344 L771,357.2344 L771,312.2344 L761,302.2344 L455,302.2344 " fill="#FBFB77" filter="url(#f1vz61evznzwz6)" style="stroke:#A80036;stroke-width:1.0;"/><path d="M761,302.2344 L761,312.2344 L771,312.2344 L761,302.2344 " fill="#FBFB77" style="stroke:#A80036;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="232" x="461" y="319.3013">See GitHub: helium/blockchain-core/</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="295" x="461" y="334.4341">Nested inits: lock, swarm, event, score_cache,</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="221" x="461" y="349.5669">worker, txn_mgr, state_channel, ...</text><ellipse cx="806" cy="392.0156" rx="4" ry="4" style="stroke:#A80036;stroke-width:1.5;fill:none;"/><polygon fill="#A80036" points="789,388.7656,799,392.7656,789,396.7656,793,392.7656" style="stroke:#A80036;stroke-width:1.0;"/><line style="stroke:#A80036;stroke-width:1.0;" x1="450" x2="795" y1="392.7656" y2="392.7656"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="65" x="457" y="387.6997">init worker</text><path d="M213,371.6328 L213,396.6328 L431,396.6328 L431,381.6328 L421,371.6328 L213,371.6328 " fill="#FBFB77" filter="url(#f1vz61evznzwz6)" style="stroke:#A80036;stroke-width:1.0;"/><path d="M421,371.6328 L421,381.6328 L431,381.6328 L421,371.6328 " fill="#FBFB77" style="stroke:#A80036;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="197" x="219" y="388.6997">./src/metrics/router_metrics.erl</text><ellipse cx="1127" cy="431.1484" rx="4" ry="4" style="stroke:#A80036;stroke-width:1.5;fill:none;"/><polygon fill="#A80036" points="1110,427.8984,1120,431.8984,1110,435.8984,1114,431.8984" style="stroke:#A80036;stroke-width:1.0;"/><line style="stroke:#A80036;stroke-width:1.0;" x1="450" x2="1116" y1="431.8984" y2="431.8984"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="65" x="457" y="426.8325">init worker</text><path d="M297,410.7656 L297,435.7656 L431,435.7656 L431,420.7656 L421,410.7656 L297,410.7656 " fill="#FBFB77" filter="url(#f1vz61evznzwz6)" style="stroke:#A80036;stroke-width:1.0;"/><path d="M421,410.7656 L421,420.7656 L431,420.7656 L421,410.7656 " fill="#FBFB77" style="stroke:#A80036;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="113" x="303" y="427.8325">./src/router_db.erl</text><polygon fill="#A80036" points="637.5,467.0313,647.5,471.0313,637.5,475.0313,641.5,471.0313" style="stroke:#A80036;stroke-width:1.0;"/><line style="stroke:#A80036;stroke-width:1.0;" x1="450" x2="643.5" y1="471.0313" y2="471.0313"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="89" x="457" y="465.9653">init supervisor</text><path d="M664,449.8984 L664,474.8984 L905,474.8984 L905,459.8984 L895,449.8984 L664,449.8984 " fill="#FBFB77" filter="url(#f1vz61evznzwz6)" style="stroke:#A80036;stroke-width:1.0;"/><path d="M895,449.8984 L895,459.8984 L905,459.8984 L895,449.8984 " fill="#FBFB77" style="stroke:#A80036;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="220" x="670" y="466.9653">./src/device/router_devices_sup.erl</text><line style="stroke:#A80036;stroke-width:1.0;" x1="659.5" x2="701.5" y1="505.1641" y2="505.1641"/><line style="stroke:#A80036;stroke-width:1.0;" x1="701.5" x2="701.5" y1="505.1641" y2="518.1641"/><line style="stroke:#A80036;stroke-width:1.0;" x1="660.5" x2="701.5" y1="518.1641" y2="518.1641"/><polygon fill="#A80036" points="670.5,514.1641,660.5,518.1641,670.5,522.1641,666.5,518.1641" style="stroke:#A80036;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="65" x="666.5" y="500.0981">init worker</text><path d="M743,490.5313 L743,515.5313 L900,515.5313 L900,500.5313 L890,490.5313 L743,490.5313 " fill="#FBFB77" filter="url(#f1vz61evznzwz6)" style="stroke:#A80036;stroke-width:1.0;"/><path d="M890,490.5313 L890,500.5313 L900,500.5313 L890,490.5313 " fill="#FBFB77" style="stroke:#A80036;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="136" x="749" y="507.5981">router_device_worker</text><ellipse cx="744" cy="559.1133" rx="4" ry="4" style="stroke:#A80036;stroke-width:1.5;fill:none;"/><polygon fill="#A80036" points="727,555.8633,737,559.8633,727,563.8633,731,559.8633" style="stroke:#A80036;stroke-width:1.0;"/><line style="stroke:#A80036;stroke-width:1.0;" x1="659.5" x2="733" y1="559.8633" y2="559.8633"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="61" x="666.5" y="554.7974">ets:new/2</text><path d="M749,531.1641 L749,571.1641 L1005,571.1641 L1005,541.1641 L995,531.1641 L749,531.1641 " fill="#FBFB77" filter="url(#f1vz61evznzwz6)" style="stroke:#A80036;stroke-width:1.0;"/><path d="M995,531.1641 L995,541.1641 L1005,541.1641 L995,531.1641 " fill="#FBFB77" style="stroke:#A80036;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="235" x="755" y="548.231">./src/device/router_device_routing.erl</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="228" x="755" y="563.3638">./src/device/router_device_cache.erl</text><polygon fill="#A80036" points="552.5,602.5625,542.5,606.5625,552.5,610.5625,548.5,606.5625" style="stroke:#A80036;stroke-width:1.0;"/><line style="stroke:#A80036;stroke-width:1.0;" x1="546.5" x2="653.5" y1="606.5625" y2="606.5625"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="89" x="558.5" y="601.4966">init supervisor</text><path d="M664,585.4297 L664,610.4297 L917,610.4297 L917,595.4297 L907,585.4297 L664,585.4297 " fill="#FBFB77" filter="url(#f1vz61evznzwz6)" style="stroke:#A80036;stroke-width:1.0;"/><path d="M907,585.4297 L907,595.4297 L917,595.4297 L907,585.4297 " fill="#FBFB77" style="stroke:#A80036;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="232" x="670" y="602.4966">./src/device/router_device_worker.erl</text><ellipse cx="535" cy="657.9453" rx="4" ry="4" style="stroke:#A80036;stroke-width:1.5;fill:none;"/><line style="stroke:#A80036;stroke-width:1.0;fill:none;" x1="541.5" x2="583.5" y1="645.6953" y2="645.6953"/><line style="stroke:#A80036;stroke-width:1.0;fill:none;" x1="583.5" x2="583.5" y1="645.6953" y2="658.6953"/><line style="stroke:#A80036;stroke-width:1.0;fill:none;" x1="540.5" x2="583.5" y1="658.6953" y2="658.6953"/><polygon fill="#A80036" points="550.5,654.6953,540.5,658.6953,550.5,662.6953,546.5,658.6953" style="stroke:#A80036;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="65" x="548.5" y="640.6294">init worker</text><path d="M625,626.0625 L625,651.0625 L942,651.0625 L942,636.0625 L932,626.0625 L625,626.0625 " fill="#FBFB77" filter="url(#f1vz61evznzwz6)" style="stroke:#A80036;stroke-width:1.0;"/><path d="M932,626.0625 L932,636.0625 L942,636.0625 L932,626.0625 " fill="#FBFB77" style="stroke:#A80036;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="296" x="631" y="643.1294">./src/device/router_device_channels_worker.erl</text><ellipse cx="201" cy="687.0781" rx="4" ry="4" style="stroke:#A80036;stroke-width:1.5;fill:none;"/><polygon fill="#A80036" points="218,683.8281,208,687.8281,218,691.8281,214,687.8281" style="stroke:#A80036;stroke-width:1.0;"/><line style="stroke:#A80036;stroke-width:1.0;" x1="216" x2="439" y1="687.8281" y2="687.8281"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="65" x="368" y="682.7622">init worker</text><path d="M455,666.6953 L455,691.6953 L738,691.6953 L738,676.6953 L728,666.6953 L455,666.6953 " fill="#FBFB77" filter="url(#f1vz61evznzwz6)" style="stroke:#A80036;stroke-width:1.0;"/><path d="M728,666.6953 L728,676.6953 L738,676.6953 L728,666.6953 " fill="#FBFB77" style="stroke:#A80036;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="262" x="461" y="683.7622">./src/router_sc_worker.erl State Channels</text><polygon fill="#A80036" points="38.5,722.9609,28.5,726.9609,38.5,730.9609,34.5,726.9609" style="stroke:#A80036;stroke-width:1.0;"/><line style="stroke:#A80036;stroke-width:1.0;" x1="32.5" x2="439" y1="726.9609" y2="726.9609"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="89" x="344" y="721.895">init supervisor</text><path d="M455,705.8281 L455,730.8281 L682,730.8281 L682,715.8281 L672,705.8281 L455,705.8281 " fill="#FBFB77" filter="url(#f1vz61evznzwz6)" style="stroke:#A80036;stroke-width:1.0;"/><path d="M672,705.8281 L672,715.8281 L682,715.8281 L672,705.8281 " fill="#FBFB77" style="stroke:#A80036;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="206" x="461" y="722.895">./src/apis/router_console_sup.erl</text><line style="stroke:#A80036;stroke-width:1.0;" x1="27.5" x2="69.5" y1="774.7266" y2="774.7266"/><line style="stroke:#A80036;stroke-width:1.0;" x1="69.5" x2="69.5" y1="774.7266" y2="787.7266"/><line style="stroke:#A80036;stroke-width:1.0;" x1="28.5" x2="69.5" y1="787.7266" y2="787.7266"/><polygon fill="#A80036" points="38.5,783.7266,28.5,787.7266,38.5,791.7266,34.5,787.7266" style="stroke:#A80036;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="65" x="34.5" y="769.6606">init worker</text><path d="M111,744.9609 L111,799.9609 L301,799.9609 L301,754.9609 L291,744.9609 L111,744.9609 " fill="#FBFB77" filter="url(#f1vz61evznzwz6)" style="stroke:#A80036;stroke-width:1.0;"/><path d="M291,744.9609 L291,754.9609 L301,754.9609 L291,744.9609 " fill="#FBFB77" style="stroke:#A80036;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="121" x="117" y="762.0278">router_console_api</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="167" x="117" y="777.1606">router_console_ws_worker</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="169" x="117" y="792.2935">router_console_dc_tracker</text><ellipse cx="744" cy="842.3086" rx="4" ry="4" style="stroke:#A80036;stroke-width:1.5;fill:none;"/><polygon fill="#A80036" points="727,839.0586,737,843.0586,727,847.0586,731,843.0586" style="stroke:#A80036;stroke-width:1.0;"/><line style="stroke:#A80036;stroke-width:1.0;" x1="22.5" x2="733" y1="843.0586" y2="843.0586"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="61" x="29.5" y="837.9927">ets:new/2</text><path d="M749,814.3594 L749,854.3594 L1020,854.3594 L1020,824.3594 L1010,814.3594 L749,814.3594 " fill="#FBFB77" filter="url(#f1vz61evznzwz6)" style="stroke:#A80036;stroke-width:1.0;"/><path d="M1010,814.3594 L1010,824.3594 L1020,824.3594 L1010,814.3594 " fill="#FBFB77" style="stroke:#A80036;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="202" x="755" y="831.4263">./src/apis/router_console_api.erl</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="250" x="755" y="846.5591">./src/apis/router_console_dc_tracker.erl</text><polygon fill="#A80036" points="959.5,893.3242,969.5,897.3242,959.5,901.3242,963.5,897.3242" style="stroke:#A80036;stroke-width:1.0;"/><line style="stroke:#A80036;stroke-width:1.0;" x1="450" x2="965.5" y1="897.3242" y2="897.3242"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="89" x="457" y="892.2583">init supervisor</text><path d="M168,868.625 L168,908.625 L431,908.625 L431,878.625 L421,868.625 L168,868.625 " fill="#FBFB77" filter="url(#f1vz61evznzwz6)" style="stroke:#A80036;stroke-width:1.0;"/><path d="M421,868.625 L421,878.625 L431,878.625 L421,868.625 " fill="#FBFB77" style="stroke:#A80036;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="118" x="174" y="885.6919">Payload extraction</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="242" x="174" y="900.8247">./src/decoders/router_decoder_sup.erl</text><line style="stroke:#A80036;stroke-width:1.0;" x1="981.5" x2="1023.5" y1="945.0898" y2="945.0898"/><line style="stroke:#A80036;stroke-width:1.0;" x1="1023.5" x2="1023.5" y1="945.0898" y2="958.0898"/><line style="stroke:#A80036;stroke-width:1.0;" x1="982.5" x2="1023.5" y1="958.0898" y2="958.0898"/><polygon fill="#A80036" points="992.5,954.0898,982.5,958.0898,992.5,962.0898,988.5,958.0898" style="stroke:#A80036;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="65" x="988.5" y="940.0239">init worker</text><path d="M644,922.8906 L644,962.8906 L962,962.8906 L962,932.8906 L952,922.8906 L644,922.8906 " fill="#FBFB77" filter="url(#f1vz61evznzwz6)" style="stroke:#A80036;stroke-width:1.0;"/><path d="M952,922.8906 L952,932.8906 L962,932.8906 L952,922.8906 " fill="#FBFB77" style="stroke:#A80036;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="279" x="650" y="939.9575">For eval of user-defined JavaScript functions</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="297" x="650" y="955.0903">./src/decoders/router_decoder_custom_sup.erl</text><ellipse cx="1183.5" cy="997.5391" rx="4" ry="4" style="stroke:#A80036;stroke-width:1.5;fill:none;"/><polygon fill="#A80036" points="1166.5,994.2891,1176.5,998.2891,1166.5,1002.2891,1170.5,998.2891" style="stroke:#A80036;stroke-width:1.0;"/><line style="stroke:#A80036;stroke-width:1.0;" x1="981.5" x2="1172.5" y1="998.2891" y2="998.2891"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="65" x="988.5" y="993.2231">init worker</text><path d="M598,977.1563 L598,1002.1563 L962,1002.1563 L962,987.1563 L952,977.1563 L598,977.1563 " fill="#FBFB77" filter="url(#f1vz61evznzwz6)" style="stroke:#A80036;stroke-width:1.0;"/><path d="M952,977.1563 L952,987.1563 L962,987.1563 L952,977.1563 " fill="#FBFB77" style="stroke:#A80036;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="343" x="604" y="994.2231">./src/decoders/router_v8.erl JavaScript for Integrations</text><ellipse cx="744" cy="1031.6719" rx="4" ry="4" style="stroke:#A80036;stroke-width:1.5;fill:none;"/><polygon fill="#A80036" points="761,1028.4219,751,1032.4219,761,1036.4219,757,1032.4219" style="stroke:#A80036;stroke-width:1.0;"/><line style="stroke:#A80036;stroke-width:1.0;" x1="759" x2="970.5" y1="1032.4219" y2="1032.4219"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="61" x="903.5" y="1027.356">ets:new/2</text><ellipse cx="975" cy="1078.8047" rx="4" ry="4" style="stroke:#A80036;stroke-width:1.5;fill:none;"/><line style="stroke:#A80036;stroke-width:1.0;fill:none;" x1="981.5" x2="1023.5" y1="1066.5547" y2="1066.5547"/><line style="stroke:#A80036;stroke-width:1.0;fill:none;" x1="1023.5" x2="1023.5" y1="1066.5547" y2="1079.5547"/><line style="stroke:#A80036;stroke-width:1.0;fill:none;" x1="980.5" x2="1023.5" y1="1079.5547" y2="1079.5547"/><polygon fill="#A80036" points="990.5,1075.5547,980.5,1079.5547,990.5,1083.5547,986.5,1079.5547" style="stroke:#A80036;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="65" x="988.5" y="1061.4888">init worker</text><path d="M625,1046.9219 L625,1071.9219 L962,1071.9219 L962,1056.9219 L952,1046.9219 L625,1046.9219 " fill="#FBFB77" filter="url(#f1vz61evznzwz6)" style="stroke:#A80036;stroke-width:1.0;"/><path d="M952,1046.9219 L952,1056.9219 L962,1056.9219 L952,1046.9219 " fill="#FBFB77" style="stroke:#A80036;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="316" x="631" y="1063.9888">./src/decoders/router_decoder_custom_worker.erl</text><ellipse cx="888.5" cy="1107.9375" rx="4" ry="4" style="stroke:#A80036;stroke-width:1.5;fill:none;"/><polygon fill="#A80036" points="871.5,1104.6875,881.5,1108.6875,871.5,1112.6875,875.5,1108.6875" style="stroke:#A80036;stroke-width:1.0;"/><line style="stroke:#A80036;stroke-width:1.0;" x1="450" x2="877.5" y1="1108.6875" y2="1108.6875"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="65" x="457" y="1103.6216">init worker</text><path d="M154,1087.5547 L154,1112.5547 L431,1112.5547 L431,1097.5547 L421,1087.5547 L154,1087.5547 " fill="#FBFB77" filter="url(#f1vz61evznzwz6)" style="stroke:#A80036;stroke-width:1.0;"/><path d="M421,1087.5547 L421,1097.5547 L431,1097.5547 L421,1087.5547 " fill="#FBFB77" style="stroke:#A80036;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="256" x="160" y="1104.6216">./src/device/ LoRaWAN device addresses</text><ellipse cx="1065" cy="1147.0703" rx="4" ry="4" style="stroke:#A80036;stroke-width:1.5;fill:none;"/><polygon fill="#A80036" points="1048,1143.8203,1058,1147.8203,1048,1151.8203,1052,1147.8203" style="stroke:#A80036;stroke-width:1.0;"/><line style="stroke:#A80036;stroke-width:1.0;" x1="450" x2="1054" y1="1147.8203" y2="1147.8203"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="65" x="457" y="1142.7544">init worker</text><path d="M122,1126.6875 L122,1151.6875 L431,1151.6875 L431,1136.6875 L421,1126.6875 L122,1126.6875 " fill="#FBFB77" filter="url(#f1vz61evznzwz6)" style="stroke:#A80036;stroke-width:1.0;"/><path d="M421,1126.6875 L421,1136.6875 L431,1136.6875 L421,1126.6875 " fill="#FBFB77" style="stroke:#A80036;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="288" x="128" y="1143.7544">./src/router_xor_filter_worker.erl Filter devices</text><text fill="#888888" font-family="sans-serif" font-size="10" lengthAdjust="spacing" textLength="149" x="1060" y="14.2822">Erlang processes within Router</text><text fill="#888888" font-family="sans-serif" font-size="10" lengthAdjust="spacing" textLength="56" x="576.5" y="1298.3994">Page 1 of 1</text><!--MD5=[7d93b7c0f28ba0f5c9d17f9dfc927c64]
@startuml

header Erlang processes within Router 
footer Page %page% of %lastpage%

' Preserve same sequence across all diagrams:
' (intentionally omitted: Lager)
actor        APIs                           as api      order 1
collections  "Blockchain\nCore"             as core     order 10
entity       "State\nChannel"               as sc       order 20
box "Exists entirely within router's BEAM image"
participant  "Listener\nfor gRPC\n(ranch)"  as listener order 30
control      "Router\ninit/1"               as init     order 40
participant  "Channels\n(Integrations)"     as channels order 50
participant  Device                         as device   order 60
database     ETS                            as ets      order 61
participant  Metrics                        as metrics  order 70
participant  DevAddr                        as devaddr  order 80
participant  Decoder                        as decoder  order 90
participant  "XOR\nFilter"                  as xor      order 99
end box
database     "Router\nDB"                   as db       order 100
participant  "V8\n(JS)"                     as v8       order 200

title Router Start of Persistent Erlang Processes\n(some have remote components)

skinparam sequence {
        LifeLineBorderColor #LightSteelBlue
        LifeLineBackgroundColor #Salmon
        MessageAlign direction
}

activate init #Salmon

        init ->o ets : init_ets/0\nets:new/2
        note right
                ETS: in-memory data store
                ./src/decoders/router_decoder.erl
        end note

        init ->o listener : application:\n ensure_all_started/1
        note right
                RPC using Google ProtoBufs listens via ranch socket server
                ./src/grpc/helium_router_service.erl, grpc_lib, grpc_client
                Template rendered via ./_build/default/lib/grpc_*/erlang.mk
        end note

        init ->o core : init supervisor
        note right
                See GitHub: helium/blockchain-core/
                Nested inits: lock, swarm, event, score_cache,
                worker, txn_mgr, state_channel, ...
        end note

        init ->o metrics : init worker
        note left: ./src/metrics/router_metrics.erl

        init ->o db : init worker
        note left: ./src/router_db.erl

        init -> device ++ : init supervisor
        note right: ./src/device/router_devices_sup.erl
        device -> device : init worker
        note right: router_device_worker
        device ->o ets : ets:new/2
        note right
                ./src/device/router_device_routing.erl
                ./src/device/router_device_cache.erl
        end note
        device -> channels - -++ : init supervisor
        note right: ./src/device/router_device_worker.erl 
        channels ->o channels - - : init worker
        note right: ./src/device/router_device_channels_worker.erl

        init ->o sc : init worker
        note right: ./src/router_sc_worker.erl State Channels

        init -> api ++ : init supervisor
        note right: ./src/apis/router_console_sup.erl
        api -> api : init worker
        note right
                router_console_api
                router_console_ws_worker
                router_console_dc_tracker
        end note
        api ->o ets - - : ets:new/2
        note right
                ./src/apis/router_console_api.erl
                ./src/apis/router_console_dc_tracker.erl
        end note

        init -> decoder ++ : init supervisor
        note left
                Payload extraction
                ./src/decoders/router_decoder_sup.erl
        end note
        decoder -> decoder : init worker
        note left
                For eval of user-defined JavaScript functions
                ./src/decoders/router_decoder_custom_sup.erl
        end note
        decoder ->o v8 : init worker
        note left: ./src/decoders/router_v8.erl JavaScript for Integrations
        decoder ->o ets : ets:new/2
        decoder ->o decoder - - : init worker
        note left: ./src/decoders/router_decoder_custom_worker.erl

        init ->o devaddr : init worker
        note left: ./src/device/ LoRaWAN device addresses
        init ->o xor : init worker
        note left: ./src/router_xor_filter_worker.erl Filter devices

...

@enduml

@startuml

header Erlang processes within Router 
footer Page %page% of %lastpage%

actor        APIs                           as api      order 1
collections  "Blockchain\nCore"             as core     order 10
entity       "State\nChannel"               as sc       order 20
box "Exists entirely within router's BEAM image"
participant  "Listener\nfor gRPC\n(ranch)"  as listener order 30
control      "Router\ninit/1"               as init     order 40
participant  "Channels\n(Integrations)"     as channels order 50
participant  Device                         as device   order 60
database     ETS                            as ets      order 61
participant  Metrics                        as metrics  order 70
participant  DevAddr                        as devaddr  order 80
participant  Decoder                        as decoder  order 90
participant  "XOR\nFilter"                  as xor      order 99
end box
database     "Router\nDB"                   as db       order 100
participant  "V8\n(JS)"                     as v8       order 200

title Router Start of Persistent Erlang Processes\n(some have remote components)

skinparam sequence {
        LifeLineBorderColor #LightSteelBlue
        LifeLineBackgroundColor #Salmon
        MessageAlign direction
}

activate init #Salmon

        init ->o ets : init_ets/0\nets:new/2
        note right
                ETS: in-memory data store
                ./src/decoders/router_decoder.erl
        end note

        init ->o listener : application:\n ensure_all_started/1
        note right
                RPC using Google ProtoBufs listens via ranch socket server
                ./src/grpc/helium_router_service.erl, grpc_lib, grpc_client
                Template rendered via ./_build/default/lib/grpc_*/erlang.mk
        end note

        init ->o core : init supervisor
        note right
                See GitHub: helium/blockchain-core/
                Nested inits: lock, swarm, event, score_cache,
                worker, txn_mgr, state_channel, ...
        end note

        init ->o metrics : init worker
        note left: ./src/metrics/router_metrics.erl

        init ->o db : init worker
        note left: ./src/router_db.erl

        init -> device ++ : init supervisor
        note right: ./src/device/router_devices_sup.erl
        device -> device : init worker
        note right: router_device_worker
        device ->o ets : ets:new/2
        note right
                ./src/device/router_device_routing.erl
                ./src/device/router_device_cache.erl
        end note
        device -> channels - -++ : init supervisor
        note right: ./src/device/router_device_worker.erl 
        channels ->o channels - - : init worker
        note right: ./src/device/router_device_channels_worker.erl

        init ->o sc : init worker
        note right: ./src/router_sc_worker.erl State Channels

        init -> api ++ : init supervisor
        note right: ./src/apis/router_console_sup.erl
        api -> api : init worker
        note right
                router_console_api
                router_console_ws_worker
                router_console_dc_tracker
        end note
        api ->o ets - - : ets:new/2
        note right
                ./src/apis/router_console_api.erl
                ./src/apis/router_console_dc_tracker.erl
        end note

        init -> decoder ++ : init supervisor
        note left
                Payload extraction
                ./src/decoders/router_decoder_sup.erl
        end note
        decoder -> decoder : init worker
        note left
                For eval of user-defined JavaScript functions
                ./src/decoders/router_decoder_custom_sup.erl
        end note
        decoder ->o v8 : init worker
        note left: ./src/decoders/router_v8.erl JavaScript for Integrations
        decoder ->o ets : ets:new/2
        decoder ->o decoder - - : init worker
        note left: ./src/decoders/router_decoder_custom_worker.erl

        init ->o devaddr : init worker
        note left: ./src/device/ LoRaWAN device addresses
        init ->o xor : init worker
        note left: ./src/router_xor_filter_worker.erl Filter devices

...

@enduml

PlantUML version 1.2021.13(Mon Nov 01 05:38:45 MDT 2021)
(GPL source distribution)
Java Runtime: OpenJDK Runtime Environment
JVM: OpenJDK 64-Bit Server VM
Default Encoding: UTF-8
Language: en
Country: US
--></g></svg>